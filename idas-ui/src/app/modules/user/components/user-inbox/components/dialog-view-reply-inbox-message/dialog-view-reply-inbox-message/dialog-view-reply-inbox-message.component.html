<div
  class="idas-dialog open"
  [ngClass]="{
    'dialog-resize-38vw': pageWidth === '38vw',
    'dialog-resize-68vw': pageWidth === '68vw'
  }"
>
  <div class="card-header card-header-danger header">
    <i class="material-icons idas-button-icon">{{ pageIcon }}</i>
    <h4 class="card-title">{{ pageTitle }}</h4>
    <p class="category">{{ pageSubTitle }}</p>
    <span>
      <button
        mat-icon-button
        class="btn btn-white btn-round btn-just-icon btn-idas-dialog-no btn-idas-dialog-float-right"
        type="button"
        data-dismiss="modal"
        (click)="onButtonClickCloseDialog()"
        title="Close"
      >
        <i class="material-icons header.buttons">close</i>
      </button>
    </span>
  </div>
  <div class="content">
    <form [formGroup]="formGroup">
      <span>
        <mat-form-field>
          <input
            matInput
            type="text"
            id="recipients"
            name="recipients"
            placeholder="Recipient"
            formControlName="recipients"
            [formControl]="cfRecipients"
            class=""
            [matAutocomplete]="auto"
          />
          <mat-autocomplete
            id="recipients"
            #auto="matAutocomplete"
            [displayWith]="displayWithFn(filteredUsers | async)"
          >
            <mat-option
              id="recipients"
              *ngFor="let value of filteredUsers | async"
              [value]="value?.id"
              (onSelectionChange)="onSelectedValueChanged($event)"
              matSort
            >
              <i
                [ngStyle]="{
                  display:
                    value?.icon === null || value?.icon === undefined
                      ? 'none'
                      : 'inline'
                }"
                class="material-icons icon-mat-option rounded {{
                  value?.cssClassCategory
                }} {{ value?.cssClass }}"
                [title]="value?.tooltip || value?.title"
                >{{ value?.icon }}</i
              >
              <img
                [ngStyle]="{
                  display:
                    value?.image === null || value?.image === undefined
                      ? 'none'
                      : 'inline'
                }"
                class="img-mat-option img23 rounded"
                [title]="value?.displayName || value?.displayValue"
                src="{{ value?.image }}"
              />
              {{ value?.displayName || value?.displayValue }}
            </mat-option>
          </mat-autocomplete>
        </mat-form-field></span
      >
      <span>
        <ul>
          <li *ngFor="let recipient of selectedElement?.Recipients">
            <i
              [ngStyle]="{
                display:
                  recipient?.Recipient?.UserType?.Icon === null ||
                  recipient?.Recipient?.UserType?.Icon === undefined
                    ? 'none'
                    : 'inline'
              }"
              class="material-icons {{
                recipient?.Recipient?.UserType?.CssClassCategory
              }} {{ recipient?.Recipient?.UserType?.CssClass }}"
              [title]="recipient?.Recipient?.UserType?.Value || ''"
              >{{ recipient?.Recipient?.UserType?.Icon }}</i
            >
            <img
              [ngStyle]="{
                display:
                  recipient?.Recipient?.Avatar === null ||
                  recipient?.Recipient?.Avatar === undefined
                    ? 'none'
                    : 'inline'
              }"
              class="img-mat-option"
              [title]="recipient?.Recipient?.DisplayName"
              src="{{ recipient?.Recipient?.Avatar }}"
            />
            {{ recipient?.Recipient?.DisplayName }}
            <span class="close">X</span>
          </li>
        </ul>
      </span>
    </form>
  </div>
  <footer class="footer">
    <button
      mat-icon-button
      class="btn btn-white btn-round btn-just-icon btn-idas-dialog-yes btn-idas-dialog-float-right"
      type="button"
      (click)="onButtonClickReply('all')"
      title="Reply All"
      [hidden]="!isViewMessage()"
    >
      <i class="material-icons idas-button-icon">reply_all</i>
    </button>
    <button
      mat-icon-button
      class="btn btn-white btn-round btn-just-icon btn-idas-dialog-yes btn-idas-dialog-float-right"
      type="button"
      (click)="onButtonClickReply()"
      title="Reply"
      [hidden]="!isViewMessage()"
    >
      <i class="material-icons idas-button-icon">reply</i>
    </button>
    <button
      mat-icon-button
      class="btn btn-white btn-round btn-just-icon btn-idas-dialog-yes btn-idas-dialog-float-right"
      type="button"
      (click)="onButtonClickSend()"
      title="Send"
      [hidden]="isViewMessage()"
    >
      <i class="material-icons idas-button-icon">send</i>
    </button>
  </footer>
</div>
